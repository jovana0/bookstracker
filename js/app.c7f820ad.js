(function(){"use strict";var e={285:function(e,t,o){var s=o(5130),r=o(6768);function a(e,t,o,a,n,i){const l=(0,r.g2)("the-header"),c=(0,r.g2)("cover-img"),d=(0,r.g2)("router-view"),m=(0,r.g2)("the-footer");return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.bF)(l),(0,r.bF)(c),(0,r.bF)(d,null,{default:(0,r.k6)((({Component:e,route:t})=>[(0,r.bF)(s.eB,{name:t.meta.transition},{default:(0,r.k6)((()=>[((0,r.uX)(),(0,r.Wv)((0,r.$y)(e)))])),_:2},1032,["name"])])),_:1}),(0,r.bF)(m)],64)}const n=e=>((0,r.Qi)("data-v-e12d492e"),e=e(),(0,r.jt)(),e),i=n((()=>(0,r.Lk)("h1",null,"Book Tracker",-1)));function l(e,t,o,s,a,n){const l=(0,r.g2)("router-link"),c=(0,r.g2)("the-nav");return(0,r.uX)(),(0,r.CE)("header",null,[(0,r.bF)(l,{to:"/"},{default:(0,r.k6)((()=>[i])),_:1}),(0,r.bF)(c)])}const c=e=>((0,r.Qi)("data-v-a38400fe"),e=e(),(0,r.jt)(),e),d={class:"navbar navbar-expand-lg bg-body-tertiary"},m={class:"container-fluid"},u=c((()=>(0,r.Lk)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarTogglerDemo01","aria-controls":"navbarTogglerDemo01","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,r.Lk)("span",{class:"navbar-toggler-icon"})],-1))),h={class:"collapse navbar-collapse",id:"navbarTogglerDemo01"},k={class:"navbar-nav me-auto mb-2 mb-lg-0"},p={class:"nav-item"},g={key:0,class:"nav-item"},v={key:1,class:"nav-item"},b={class:"nav-item"},f={key:3,class:"nav-item"},y={key:4,class:"nav-item"};function L(e,t,o,s,a,n){const i=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("nav",d,[(0,r.Lk)("div",m,[u,(0,r.Lk)("div",h,[(0,r.Lk)("ul",k,[(0,r.Lk)("li",p,[(0,r.bF)(i,{class:"nav-link",to:"/"},{default:(0,r.k6)((()=>[(0,r.eW)("List of books")])),_:1})]),n.isLoggin?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("li",g,[(0,r.bF)(i,{class:"nav-link",to:"/singup"},{default:(0,r.k6)((()=>[(0,r.eW)("Singup")])),_:1})])),n.isLoggin?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("li",v,[(0,r.bF)(i,{class:"nav-link",to:"/login"},{default:(0,r.k6)((()=>[(0,r.eW)("Login")])),_:1})])),n.isLoggin?((0,r.uX)(),(0,r.CE)("li",{key:2,class:"nav-item",onClick:t[0]||(t[0]=(...e)=>n.logout&&n.logout(...e))},[(0,r.bF)(i,{class:"nav-link",to:"/"},{default:(0,r.k6)((()=>[(0,r.eW)("Logout")])),_:1})])):(0,r.Q3)("",!0),(0,r.Lk)("li",b,[(0,r.bF)(i,{class:"nav-link",to:"/about"},{default:(0,r.k6)((()=>[(0,r.eW)("Author")])),_:1})]),e.isAdmin?((0,r.uX)(),(0,r.CE)("li",f,[(0,r.bF)(i,{class:"nav-link",to:"/admin"},{default:(0,r.k6)((()=>[(0,r.eW)("Admin")])),_:1})])):(0,r.Q3)("",!0),e.isUser?((0,r.uX)(),(0,r.CE)("li",y,[(0,r.bF)(i,{class:"nav-link",to:"/myprofile"},{default:(0,r.k6)((()=>[(0,r.eW)("User")])),_:1})])):(0,r.Q3)("",!0)])])])])}var E=o(782),C={computed:{...(0,E.L8)("auth",["isAuthenticated","isAdmin","isUser"]),isLoggin(){return this.isAuthenticated}},methods:{logout(){this.$store.dispatch("auth/logout").then((()=>{this.$router.replace({name:"login"})}))}}},_=o(1241);const w=(0,_.A)(C,[["render",L],["__scopeId","data-v-a38400fe"]]);var S=w,U={components:{TheNav:S}};const F=(0,_.A)(U,[["render",l],["__scopeId","data-v-e12d492e"]]);var A=F;function B(e,t){return(0,r.uX)(),(0,r.CE)("div")}const O={},I=(0,_.A)(O,[["render",B],["__scopeId","data-v-0547533b"]]);var X=I;const T=e=>((0,r.Qi)("data-v-704184ea"),e=e(),(0,r.jt)(),e),P=T((()=>(0,r.Lk)("p",null,"Copyright©Jovana Davidović",-1))),G=T((()=>(0,r.Lk)("a",{href:"../../assets/dokumentacija"},[(0,r.Lk)("i",{class:"fa-regular fa-file"})],-1))),R=[P,G];function j(e,t){return(0,r.uX)(),(0,r.CE)("footer",null,R)}const $={},D=(0,_.A)($,[["render",j],["__scopeId","data-v-704184ea"]]);var Q=D,x={components:{TheHeader:A,CoverImg:X,TheFooter:Q},created(){this.$store.dispatch("books/loadBooks"),this.$store.dispatch("books/getCategories")}};const M=(0,_.A)(x,[["render",a],["__scopeId","data-v-141cc39c"]]);var V=M,N=o(1387),q=o(4232);const z=e=>((0,r.Qi)("data-v-1e980a62"),e=e(),(0,r.jt)(),e),J=z((()=>(0,r.Lk)("h2",null,"Books",-1))),K={id:"list"},W={id:"l"},Y=["href"],H=["src","alt"],Z={class:"card-body"},ee={class:"card-title"},te={class:"card-text"},oe={class:"card-text"},se={class:"card-text"},re=["onClick"],ae=z((()=>(0,r.Lk)("i",{class:"fa fa-heart"},null,-1))),ne={class:"pagination"},ie=["disabled"],le=["disabled"];function ce(e,t,o,s,a,n){const i=(0,r.g2)("filter-books");return(0,r.uX)(),(0,r.CE)("main",null,[J,(0,r.Lk)("div",K,[(0,r.bF)(i,{onGenresLoaded:n.setGenres},null,8,["onGenresLoaded"]),(0,r.Lk)("div",W,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.paginatedData,(t=>((0,r.uX)(),(0,r.CE)("div",{class:"card mb-3 me-3",style:{width:"18rem"},key:t.id},[(0,r.Lk)("a",{href:"/book/"+t.id},[(0,r.Lk)("img",{class:"card-img-top",src:t.img,alt:t.name},null,8,H),(0,r.Lk)("div",Z,[(0,r.Lk)("h5",ee,(0,q.v_)(t.name),1),(0,r.Lk)("p",te,"Author: "+(0,q.v_)(t.author),1),(0,r.Lk)("p",oe," Genre: "+(0,q.v_)(n.getGenreNames(t.genreId).join(", ")),1),(0,r.Lk)("p",se,"Published: "+(0,q.v_)(t.published_year),1)])],8,Y),e.isUser?((0,r.uX)(),(0,r.CE)("button",{key:0,onClick:o=>e.addToFavorites(t.id),class:"btn btn-outline-light"},[ae,(0,r.eW)(" Add to Your Book List ")],8,re)):(0,r.Q3)("",!0)])))),128))])]),(0,r.Lk)("div",ne,[(0,r.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>n.prevPage&&n.prevPage(...e)),disabled:1===a.currentPage,class:"btn btn-outline-light"},"Prev",8,ie),(0,r.Lk)("span",null,"Page "+(0,q.v_)(a.currentPage)+" of "+(0,q.v_)(n.totalPages),1),(0,r.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>n.nextPage&&n.nextPage(...e)),disabled:a.currentPage===n.totalPages,class:"btn btn-outline-light"},"Next",8,le)])])}const de={id:"f"},me={id:"fil"},ue=["value","id"],he=["for"],ke=(0,r.Fv)('<option value="0" data-v-dca52940>Sort by</option><option value="name_asc" data-v-dca52940>Books name Asc</option><option value="name_desc" data-v-dca52940>Books name Desc</option><option value="year_asc" data-v-dca52940>Publish year Asc</option><option value="year_desc" data-v-dca52940>Publish year Desc</option>',5),pe=[ke];function ge(e,t,o,a,n,i){return(0,r.uX)(),(0,r.CE)("div",de,[(0,r.Lk)("div",me,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.genres,(e=>((0,r.uX)(),(0,r.CE)("div",{class:"form-check",key:e.id},[(0,r.bo)((0,r.Lk)("input",{class:"form-check-input",type:"checkbox",value:e.id,id:e.id+e.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.selectedGenres=e)},null,8,ue),[[s.lH,n.selectedGenres]]),(0,r.Lk)("label",{class:"form-check-label",for:e.id+e.name},(0,q.v_)(e.name),9,he)])))),128))]),(0,r.bo)((0,r.Lk)("select",{class:"form-select","onUpdate:modelValue":t[1]||(t[1]=e=>n.sortOption=e)},pe,512),[[s.u1,n.sortOption]]),(0,r.bo)((0,r.Lk)("input",{class:"form-control search",type:"search",placeholder:"Search","onUpdate:modelValue":t[2]||(t[2]=e=>n.searchQuery=e)},null,512),[[s.Jo,n.searchQuery]])])}var ve={data(){return{genres:[],selectedGenres:[],sortOption:"0",searchQuery:""}},computed:{...(0,E.L8)({genresFromStore:"books/getGenres"})},watch:{genresFromStore:{immediate:!0,handler(e){e&&Array.isArray(e)?this.genres=e.sort(((e,t)=>e.name<t.name?-1:e.name>t.name?1:0)):this.genres=[]}},selectedGenres(e){this.setGenres(e)},sortOption(e){this.setSortOption(e)},searchQuery(e){this.setSearch(e)}},methods:{...(0,E.PY)("books",["setGenres","setSearch","setSortOption"])},created(){this.$store.dispatch("books/getCategories")}};const be=(0,_.A)(ve,[["render",ge],["__scopeId","data-v-dca52940"]]);var fe=be,ye={data(){return{genres:[],currentPage:1,itemsPerPage:6}},components:{FilterBooks:fe},computed:{...(0,E.L8)({isUser:"auth/isUser",currentUser:"auth/currentUser",books:"books/getBooks",genresFromStore:"books/getGenres"}),totalPages(){return this.books.length?Math.ceil(this.books.length/this.itemsPerPage):1},paginatedData(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;return this.books.slice(e,t)}},watch:{genresFromStore:{immediate:!0,handler(e){this.genres=e}}},methods:{...(0,E.i0)({addToFavorites:"books/addToFavorites"}),setGenres(e){this.genres=e},getGenreNames(e){return e.map((e=>{const t=this.genres.find((t=>t.id===e));return t?t.name:""}))},prevPage(){this.currentPage>1&&this.currentPage--},nextPage(){this.currentPage<this.totalPages&&this.currentPage++}}};const Le=(0,_.A)(ye,[["render",ce],["__scopeId","data-v-1e980a62"]]);var Ee=Le;const Ce=e=>((0,r.Qi)("data-v-617a8935"),e=e(),(0,r.jt)(),e),_e={id:"single"},we={key:0},Se=Ce((()=>(0,r.Lk)("h3",null,"Book Details",-1))),Ue={class:"card mb-3 ms-5",style:{"max-width":"85%"}},Fe={class:"row g-0"},Ae={class:"col-md-3"},Be=["src","alt"],Oe={class:"col-md-9"},Ie={class:"card-body"},Xe={class:"card-title"},Te={class:"card-text"},Pe={class:"text-muted"},Ge={class:"card-text"},Re={key:0},je=Ce((()=>(0,r.Lk)("h2",null,"Leave a comment",-1))),$e={key:1},De=Ce((()=>(0,r.Lk)("h3",null,"Comments",-1))),Qe={key:1};function xe(e,t,o,s,a,n){const i=(0,r.g2)("the-form-comment"),l=(0,r.g2)("comment-item");return(0,r.uX)(),(0,r.CE)("div",_e,["object"===typeof a.singleBook&&null!==a.singleBook?((0,r.uX)(),(0,r.CE)("div",we,[Se,(0,r.Lk)("div",Ue,[(0,r.Lk)("div",Fe,[(0,r.Lk)("div",Ae,[(0,r.Lk)("img",{src:a.singleBook.img,class:"img-fluid rounded-start",alt:a.singleBook.name},null,8,Be)]),(0,r.Lk)("div",Oe,[(0,r.Lk)("div",Ie,[(0,r.Lk)("h5",Xe,(0,q.v_)(a.singleBook.name),1),(0,r.Lk)("p",Te,[(0,r.Lk)("small",Pe,(0,q.v_)(a.singleBook.author),1)]),(0,r.Lk)("p",Ge,(0,q.v_)(a.singleBook.description),1)])])])]),e.isUser&&e.isAuthenticated?((0,r.uX)(),(0,r.CE)("div",Re,[je,(0,r.bF)(i,{bookId:a.singleBook.id,onCommentAdded:n.addComment},null,8,["bookId","onCommentAdded"])])):(0,r.Q3)("",!0),a.comments&&a.comments.length?((0,r.uX)(),(0,r.CE)("div",$e,[De,(0,r.Lk)("ul",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(a.comments,(e=>((0,r.uX)(),(0,r.CE)("li",{key:e.date},[(0,r.bF)(l,{comment:e},null,8,["comment"])])))),128))])])):(0,r.Q3)("",!0)])):((0,r.uX)(),(0,r.CE)("div",Qe,[(0,r.Lk)("h3",null,(0,q.v_)(a.singleBook),1)]))])}o(4114);const Me=e=>((0,r.Qi)("data-v-518010f8"),e=e(),(0,r.jt)(),e),Ve={class:"comment-form"},Ne=Me((()=>(0,r.Lk)("h3",null,"Add a Comment",-1))),qe=Me((()=>(0,r.Lk)("button",{type:"submit",class:"btn btn-outline-light"},"Submit",-1)));function ze(e,t,o,a,n,i){const l=(0,r.g2)("custom-input");return(0,r.uX)(),(0,r.CE)("div",Ve,[Ne,(0,r.Lk)("form",{onSubmit:t[1]||(t[1]=(0,s.D$)(((...e)=>i.submitComment&&i.submitComment(...e)),["prevent"]))},[(0,r.bF)(l,{modelValue:n.commentText,"onUpdate:modelValue":t[0]||(t[0]=e=>n.commentText=e),label:"Comment",id:"comment"},null,8,["modelValue"]),qe],32)])}const Je={class:"custom-input"},Ke=["for"],We=["id","type","value"],Ye={key:0};function He(e,t,o,s,a,n){return(0,r.uX)(),(0,r.CE)("div",Je,[(0,r.Lk)("label",{for:o.id},(0,q.v_)(o.label),9,Ke),(0,r.Lk)("input",{id:o.id,type:o.type,value:o.modelValue,onInput:t[0]||(t[0]=t=>e.$emit("update:modelValue",t.target.value))},null,40,We),o.error?((0,r.uX)(),(0,r.CE)("p",Ye,(0,q.v_)(o.error),1)):(0,r.Q3)("",!0)])}var Ze={name:"CustomInput",props:{modelValue:{type:String,default:""},label:{type:String,required:!0},id:{type:String,required:!0},type:{type:String,default:"text"},error:{type:String,default:""}}};const et=(0,_.A)(Ze,[["render",He],["__scopeId","data-v-cb67d5c4"]]);var tt=et,ot={components:{CustomInput:tt},props:["bookId"],data(){return{commentText:""}},methods:{async submitComment(){if(""===this.commentText.trim())return void alert("Comment cannot be empty");const e={bookId:this.bookId,comment:this.commentText,user:this.$store.getters["auth/currentUser"].username,date:(new Date).toISOString()};try{await this.$store.dispatch("books/addComment",e),alert("Comment added successfully"),this.$emit("commentAdded",e),this.commentText=""}catch(t){console.error("Error submitting comment:",t),alert("Error submitting comment")}}}};const st=(0,_.A)(ot,[["render",ze],["__scopeId","data-v-518010f8"]]);var rt=st;const at={class:"comment-item"};function nt(e,t,o,s,a,n){return(0,r.uX)(),(0,r.CE)("div",at,[(0,r.Lk)("p",null,[(0,r.Lk)("strong",null,(0,q.v_)(o.comment.user),1),(0,r.eW)(" ("+(0,q.v_)(o.comment.date)+"):",1)]),(0,r.Lk)("p",null,(0,q.v_)(o.comment.comment),1)])}var it={name:"CommentItem",props:{comment:{type:Object,required:!0}}};const lt=(0,_.A)(it,[["render",nt],["__scopeId","data-v-9f4ada20"]]);var ct=lt,dt={components:{TheFormComment:rt,CommentItem:ct},props:["id"],data(){return{singleBook:null,comments:[]}},computed:{...(0,E.L8)("auth",["isAuthenticated","isUser"])},async created(){await this.$store.dispatch("books/getOneBook",this.id),this.getOneBook(),this.getComments()},methods:{getOneBook(){try{this.singleBook=this.$store.getters["books/getBook"](this.id),console.log(this.singleBook)}catch(e){console.error("Error getting the book from store:",e)}},async getComments(){try{this.comments=await this.$store.dispatch("books/getCommentsByBookId",this.id),console.log(this.comments.data)}catch(e){console.error("Error getting comments:",e)}},addComment(e){this.comments.push(e)}},watch:{"$store.state.books.books"(){this.getOneBook()}}};const mt=(0,_.A)(dt,[["render",xe],["__scopeId","data-v-617a8935"]]);var ut=mt;const ht=e=>((0,r.Qi)("data-v-25f9de57"),e=e(),(0,r.jt)(),e),kt={class:""},pt=ht((()=>(0,r.Lk)("h2",null,"Sign up",-1))),gt={class:"mb-3"},vt=ht((()=>(0,r.Lk)("label",{for:"username",class:"form-label"},"Username",-1))),bt={key:0,class:"invalid-feedback"},ft={class:"mb-3"},yt=ht((()=>(0,r.Lk)("label",{for:"email",class:"form-label"},"Email",-1))),Lt={key:0,class:"invalid-feedback"},Et={class:"mb-3"},Ct=ht((()=>(0,r.Lk)("label",{for:"password",class:"form-label"},"Password",-1))),_t={key:0,class:"invalid-feedback"},wt={class:"mb-3"},St=ht((()=>(0,r.Lk)("label",{for:"confirmPassword",class:"form-label"},"Confirm password",-1))),Ut={key:0,class:"invalid-feedback"},Ft=ht((()=>(0,r.Lk)("button",{type:"submit",class:"btn btn-outline-light"},"Sign up",-1)));function At(e,t,o,a,n,i){return(0,r.uX)(),(0,r.CE)("div",kt,[pt,(0,r.Lk)("form",{onSubmit:t[4]||(t[4]=(0,s.D$)(((...e)=>i.submitForm&&i.submitForm(...e)),["prevent"]))},[(0,r.Lk)("div",gt,[vt,(0,r.bo)((0,r.Lk)("input",{type:"text",class:(0,q.C4)(["form-control",{"is-invalid":n.errors.username}]),id:"username","onUpdate:modelValue":t[0]||(t[0]=e=>n.form.username=e)},null,2),[[s.Jo,n.form.username]]),n.errors.username?((0,r.uX)(),(0,r.CE)("div",bt,(0,q.v_)(n.errors.username),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",ft,[yt,(0,r.bo)((0,r.Lk)("input",{type:"email",class:(0,q.C4)(["form-control",{"is-invalid":n.errors.email}]),id:"email","onUpdate:modelValue":t[1]||(t[1]=e=>n.form.email=e)},null,2),[[s.Jo,n.form.email]]),n.errors.email?((0,r.uX)(),(0,r.CE)("div",Lt,(0,q.v_)(n.errors.email),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",Et,[Ct,(0,r.bo)((0,r.Lk)("input",{type:"password",class:(0,q.C4)(["form-control",{"is-invalid":n.errors.password}]),id:"password","onUpdate:modelValue":t[2]||(t[2]=e=>n.form.password=e)},null,2),[[s.Jo,n.form.password]]),n.errors.password?((0,r.uX)(),(0,r.CE)("div",_t,(0,q.v_)(n.errors.password),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",wt,[St,(0,r.bo)((0,r.Lk)("input",{type:"password",class:(0,q.C4)(["form-control",{"is-invalid":n.errors.confirmPassword}]),id:"confirmPassword","onUpdate:modelValue":t[3]||(t[3]=e=>n.form.confirmPassword=e)},null,2),[[s.Jo,n.form.confirmPassword]]),n.errors.confirmPassword?((0,r.uX)(),(0,r.CE)("div",Ut,(0,q.v_)(n.errors.confirmPassword),1)):(0,r.Q3)("",!0)]),Ft],32),n.registerMessage?((0,r.uX)(),(0,r.CE)("div",{key:0,class:(0,q.C4)(["alert mt-3",{"alert-success":n.registerSuccess,"alert-danger":!n.registerSuccess}])},(0,q.v_)(n.registerMessage),3)):(0,r.Q3)("",!0)])}var Bt={data(){return{form:{username:"",email:"",password:"",confirmPassword:""},errors:{},registerMessage:"",registerSuccess:!1}},methods:{validateForm(){return this.errors={},this.form.username||(this.errors.username="Korisničko ime je obavezno."),this.form.email?this.validEmail(this.form.email)||(this.errors.email="Email nije validan."):this.errors.email="Email je obavezan.",this.form.password?this.form.password.length<6&&(this.errors.password="Lozinka mora imati najmanje 6 karaktera."):this.errors.password="Lozinka je obavezna.",this.form.confirmPassword?this.form.password!==this.form.confirmPassword&&(this.errors.confirmPassword="Lozinke se ne poklapaju."):this.errors.confirmPassword="Potvrda lozinke je obavezna.",0===Object.keys(this.errors).length},validEmail(e){const t=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;return t.test(e)},async submitForm(){if(this.validateForm())try{const e=await this.$store.dispatch("auth/register",{username:this.form.username,email:this.form.email,password:this.form.password});this.registerMessage=e.message,this.registerSuccess=e.success,e.success&&(this.resetForm(),this.$router.push({name:"Home"}))}catch(e){console.error(e),this.registerMessage="Došlo je do greške prilikom registracije.",this.registerSuccess=!1}},resetForm(){this.form.username="",this.form.email="",this.form.password="",this.form.confirmPassword="",this.errors={}}}};const Ot=(0,_.A)(Bt,[["render",At],["__scopeId","data-v-25f9de57"]]);var It=Ot;const Xt=e=>((0,r.Qi)("data-v-228e7694"),e=e(),(0,r.jt)(),e),Tt={class:""},Pt=Xt((()=>(0,r.Lk)("h2",null,"Login",-1))),Gt={class:"mb-3"},Rt=Xt((()=>(0,r.Lk)("label",{for:"username",class:"form-label"},"Username",-1))),jt={key:0,class:"invalid-feedback"},$t={class:"mb-3"},Dt=Xt((()=>(0,r.Lk)("label",{for:"password",class:"form-label"},"Password",-1))),Qt={key:0,class:"invalid-feedback"},xt=Xt((()=>(0,r.Lk)("button",{type:"submit",class:"btn btn-outline-light"},"Login",-1)));function Mt(e,t,o,a,n,i){return(0,r.uX)(),(0,r.CE)("div",Tt,[Pt,(0,r.Lk)("form",{onSubmit:t[2]||(t[2]=(0,s.D$)(((...e)=>i.submitForm&&i.submitForm(...e)),["prevent"]))},[(0,r.Lk)("div",Gt,[Rt,(0,r.bo)((0,r.Lk)("input",{type:"text",class:(0,q.C4)(["form-control",{"is-invalid":n.errors.username}]),id:"username","onUpdate:modelValue":t[0]||(t[0]=e=>n.form.username=e)},null,2),[[s.Jo,n.form.username]]),n.errors.username?((0,r.uX)(),(0,r.CE)("div",jt,(0,q.v_)(n.errors.username),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",$t,[Dt,(0,r.bo)((0,r.Lk)("input",{type:"password",class:(0,q.C4)(["form-control",{"is-invalid":n.errors.password}]),id:"password","onUpdate:modelValue":t[1]||(t[1]=e=>n.form.password=e)},null,2),[[s.Jo,n.form.password]]),n.errors.password?((0,r.uX)(),(0,r.CE)("div",Qt,(0,q.v_)(n.errors.password),1)):(0,r.Q3)("",!0)]),xt],32),n.loginMessage?((0,r.uX)(),(0,r.CE)("div",{key:0,class:(0,q.C4)(["alert mt-3",{"alert-success":n.loginSuccess,"alert-danger":!n.loginSuccess}])},(0,q.v_)(n.loginMessage),3)):(0,r.Q3)("",!0)])}var Vt={data(){return{form:{username:"",password:""},errors:{},loginMessage:"",loginSuccess:!1}},methods:{validateForm(){return this.errors={},this.form.username||(this.errors.username="Korisničko ime je obavezno."),this.form.password||(this.errors.password="Lozinka je obavezna."),0===Object.keys(this.errors).length},async submitForm(){if(this.validateForm())try{const e=await this.$store.dispatch("auth/login",{username:this.form.username,password:this.form.password});this.loginMessage=e.message,this.loginSuccess=e.success,e.success&&this.$router.push({name:"myprofile"})}catch(e){console.error(e),this.loginMessage="Došlo je do greške prilikom logovanja.",this.loginSuccess=!1}}}};const Nt=(0,_.A)(Vt,[["render",Mt],["__scopeId","data-v-228e7694"]]);var qt=Nt;const zt=e=>((0,r.Qi)("data-v-4336c0da"),e=e(),(0,r.jt)(),e),Jt={id:"admin"},Kt=zt((()=>(0,r.Lk)("h3",null,"Admin Page",-1))),Wt={class:"dugmad"},Yt={key:0},Ht=zt((()=>(0,r.Lk)("h4",null,"All Books",-1))),Zt=zt((()=>(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"Name"),(0,r.Lk)("th",null,"Actions")])],-1))),eo=["onClick"],to={key:1},oo=zt((()=>(0,r.Lk)("h4",null,"All Users",-1))),so=zt((()=>(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"Username"),(0,r.Lk)("th",null,"Email"),(0,r.Lk)("th",null,"Role"),(0,r.Lk)("th",null,"Actions")])],-1))),ro=["onClick"],ao={key:2},no=zt((()=>(0,r.Lk)("h4",null,"Add New Book",-1))),io={key:3},lo=zt((()=>(0,r.Lk)("h4",null,"Add New Genre",-1))),co={class:"mb-3"},mo=zt((()=>(0,r.Lk)("button",{type:"submit",class:"btn btn-outline-light"},"Add Genre",-1)));function uo(e,t,o,a,n,i){const l=(0,r.g2)("book-form");return(0,r.uX)(),(0,r.CE)("div",Jt,[Kt,(0,r.Lk)("div",Wt,[(0,r.Lk)("button",{onClick:t[0]||(t[0]=e=>i.toggleSection("books")),class:"btn btn-outline-light"},"Show All Books"),(0,r.Lk)("button",{onClick:t[1]||(t[1]=e=>i.toggleSection("users")),class:"btn btn-outline-light"},"Show All Users"),(0,r.Lk)("button",{onClick:t[2]||(t[2]=e=>i.toggleSection("addBook")),class:"btn btn-outline-light"},"Add New Book"),(0,r.Lk)("button",{onClick:t[3]||(t[3]=e=>i.toggleSection("addGenre")),class:"btn btn-outline-light"},"Add New Genre")]),n.showBooks?((0,r.uX)(),(0,r.CE)("div",Yt,[Ht,(0,r.Lk)("table",null,[Zt,(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.books,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:e.id},[(0,r.Lk)("td",null,(0,q.v_)(e.name),1),(0,r.Lk)("td",null,[(0,r.Lk)("button",{onClick:t=>i.deleteBook(e.id),class:"btn btn-outline-light"},"Delete",8,eo)])])))),128))])])])):(0,r.Q3)("",!0),n.showUsers?((0,r.uX)(),(0,r.CE)("div",to,[oo,(0,r.Lk)("table",null,[so,(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.users,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:e.id},[(0,r.Lk)("td",null,(0,q.v_)(e.username),1),(0,r.Lk)("td",null,(0,q.v_)(e.email),1),(0,r.Lk)("td",null,(0,q.v_)(e.role),1),(0,r.Lk)("td",null,[(0,r.Lk)("button",{onClick:t=>i.deleteUser(e.id),class:"btn btn-outline-light"},"Delete",8,ro)])])))),128))])])])):(0,r.Q3)("",!0),n.showAddBook?((0,r.uX)(),(0,r.CE)("div",ao,[no,(0,r.bF)(l,{onSubmit:i.addBook},null,8,["onSubmit"])])):(0,r.Q3)("",!0),n.showAddGenre?((0,r.uX)(),(0,r.CE)("div",io,[lo,(0,r.Lk)("form",{onSubmit:t[5]||(t[5]=(0,s.D$)(((...e)=>i.addGenre&&i.addGenre(...e)),["prevent"]))},[(0,r.Lk)("div",co,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>n.newGenre.name=e),class:"form-control",placeholder:"Genre Name",required:""},null,512),[[s.Jo,n.newGenre.name]])]),mo],32)])):(0,r.Q3)("",!0)])}const ho={class:"mb-3"},ko={class:"mb-3"},po={class:"mb-3"},go={key:0,class:"error"},vo={class:"mb-3"},bo={class:"mb-3"},fo={key:0,class:"mb-3 form-check"},yo=(0,r.Lk)("label",null,"Genres:",-1),Lo=["value","onChange"],Eo=["disabled"];function Co(e,t,o,a,n,i){return(0,r.uX)(),(0,r.CE)("form",{onSubmit:t[6]||(t[6]=(0,s.D$)(((...e)=>i.handleSubmit&&i.handleSubmit(...e)),["prevent"]))},[(0,r.Lk)("div",ho,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.book.name=e),placeholder:"Book Name",class:"form-control",required:""},null,512),[[s.Jo,n.book.name]])]),(0,r.Lk)("div",ko,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.book.description=e),placeholder:"Description",class:"form-control",required:""},null,512),[[s.Jo,n.book.description]])]),(0,r.Lk)("div",po,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>n.book.img=e),placeholder:"Image URL",class:"form-control",required:"",onInput:t[3]||(t[3]=(...e)=>i.validateURL&&i.validateURL(...e))},null,544),[[s.Jo,n.book.img]]),n.errors.img?((0,r.uX)(),(0,r.CE)("span",go,(0,q.v_)(n.errors.img),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",vo,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>n.book.published_year=e),type:"number",class:"form-control",placeholder:"Published Year",required:""},null,512),[[s.Jo,n.book.published_year]])]),(0,r.Lk)("div",bo,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>n.book.author=e),placeholder:"Author",class:"form-control",required:""},null,512),[[s.Jo,n.book.author]])]),i.genres.length?((0,r.uX)(),(0,r.CE)("div",fo,[yo,((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.genres,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id},[(0,r.Lk)("input",{type:"checkbox",class:"form-check-input",value:e.id,onChange:t=>i.toggleGenre(e.id)},null,40,Lo),(0,r.eW)(" "+(0,q.v_)(e.name),1)])))),128))])):(0,r.Q3)("",!0),(0,r.Lk)("button",{type:"submit",disabled:n.isSubmitDisabled,class:"btn"},"Add Book",8,Eo)],32)}var _o={data(){return{book:{name:"",description:"",img:"",published_year:"",author:"",genreId:[]},errors:{img:""},isSubmitDisabled:!0}},computed:{...(0,E.L8)("books",["getGenres"]),genres(){return this.getGenres}},methods:{handleSubmit(){this.$emit("submit",this.book),this.resetForm()},validateURL(){const e=new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i");e.test(this.book.img)?(this.errors.img="",this.isSubmitDisabled=!1):(this.errors.img="Invalid URL",this.isSubmitDisabled=!0)},toggleGenre(e){const t=this.book.genreId.indexOf(e);-1===t?this.book.genreId.push(e):this.book.genreId.splice(t,1)},resetForm(){this.book={name:"",description:"",img:"",published_year:"",author:"",genreId:[]},this.isSubmitDisabled=!0,this.errors.img=""}},created(){this.$store.dispatch("books/getCategories")}};const wo=(0,_.A)(_o,[["render",Co]]);var So=wo,Uo={components:{BookForm:So},data(){return{showBooks:!0,showUsers:!1,showAddBook:!1,showAddGenre:!1,newGenre:{name:""}}},computed:{...(0,E.L8)({books:"books/getBooks",users:"auth/users"})},methods:{toggleSection(e){this.showBooks="books"===e,this.showUsers="users"===e,this.showAddBook="addBook"===e,this.showAddGenre="addGenre"===e},async addBook(e){await this.$store.dispatch("books/addBook",e)},async addGenre(){await this.$store.dispatch("books/addGenre",this.newGenre),this.newGenre={name:""}},async deleteBook(e){await this.$store.dispatch("books/deleteBook",e)},async deleteUser(e){await this.$store.dispatch("auth/deleteUser",e)}},created(){this.$store.dispatch("books/loadBooks"),this.$store.dispatch("books/getCategories"),this.$store.dispatch("auth/fetchUsers")}};const Fo=(0,_.A)(Uo,[["render",uo],["__scopeId","data-v-4336c0da"]]);var Ao=Fo;const Bo=e=>((0,r.Qi)("data-v-7d0806aa"),e=e(),(0,r.jt)(),e),Oo={id:"profile"},Io=Bo((()=>(0,r.Lk)("h3",null,"My Profile",-1))),Xo=Bo((()=>(0,r.Lk)("strong",null,"Username:",-1))),To=Bo((()=>(0,r.Lk)("strong",null,"Email:",-1))),Po={key:0},Go={key:0},Ro=Bo((()=>(0,r.Lk)("h3",null,"Comments",-1))),jo={key:1},$o=Bo((()=>(0,r.Lk)("p",null,"No comments found",-1))),Do=[$o],Qo={key:1},xo={key:0},Mo=Bo((()=>(0,r.Lk)("h4",null,"My Favorite Books",-1))),Vo={id:"l"},No=["href"],qo=["src","alt"],zo={class:"card-body"},Jo={class:"card-title"},Ko={class:"card-text"},Wo={class:"card-text"},Yo=["onClick"],Ho={key:1},Zo=Bo((()=>(0,r.Lk)("p",null,"No favorite books found",-1))),es=[Zo];function ts(e,t,o,s,a,n){const i=(0,r.g2)("comment-item");return(0,r.uX)(),(0,r.CE)("div",Oo,[Io,(0,r.Lk)("p",null,[Xo,(0,r.eW)(" "+(0,q.v_)(e.currentUser.username),1)]),(0,r.Lk)("p",null,[To,(0,r.eW)(" "+(0,q.v_)(e.currentUser.email),1)]),(0,r.Lk)("button",{onClick:t[0]||(t[0]=e=>n.toggleSection("favorites")),class:"btn btn-outline-light"},"Show My Favorite Books"),(0,r.Lk)("button",{onClick:t[1]||(t[1]=e=>n.toggleSection("comments")),class:"btn btn-outline-light"},"Show My Comments"),a.showComments?((0,r.uX)(),(0,r.CE)("div",Po,[a.comments&&a.comments.length>0?((0,r.uX)(),(0,r.CE)("div",Go,[Ro,(0,r.Lk)("ul",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(a.comments,(e=>((0,r.uX)(),(0,r.CE)("li",{key:e.date},[(0,r.bF)(i,{comment:e},null,8,["comment"])])))),128))])])):a.commentsFetched?((0,r.uX)(),(0,r.CE)("div",jo,Do)):(0,r.Q3)("",!0)])):(0,r.Q3)("",!0),a.showFavorites?((0,r.uX)(),(0,r.CE)("div",Qo,[a.favorites&&a.favorites.length>0?((0,r.uX)(),(0,r.CE)("div",xo,[Mo,(0,r.Lk)("div",Vo,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(a.favorites,(e=>((0,r.uX)(),(0,r.CE)("div",{class:"card mb-3 me-3",style:{width:"18rem"},key:e.id},[(0,r.Lk)("a",{href:"/book/"+e.id},[(0,r.Lk)("img",{class:"card-img-top",src:e.img,alt:e.name},null,8,qo),(0,r.Lk)("div",zo,[(0,r.Lk)("h5",Jo,(0,q.v_)(e.name),1),(0,r.Lk)("p",Ko,"Author: "+(0,q.v_)(e.author),1),(0,r.Lk)("p",Wo,"Published: "+(0,q.v_)(e.published_year),1)])],8,No),(0,r.Lk)("button",{onClick:t=>n.removeFromFavorites(e.id),class:"btn btn-outline-light"}," Remove from Your Book List ",8,Yo)])))),128))])])):a.favoritesFetched?((0,r.uX)(),(0,r.CE)("div",Ho,es)):(0,r.Q3)("",!0)])):(0,r.Q3)("",!0)])}var os={components:{CommentItem:ct},data(){return{comments:[],favorites:[],commentsFetched:!1,favoritesFetched:!1,showComments:!1,showFavorites:!0}},computed:{...(0,E.L8)("auth",["currentUser"]),...(0,E.L8)("books",["getBooks"])},methods:{async fetchUserComments(){try{const e=await this.$store.dispatch("books/getUserComments",this.currentUser.username);this.comments=e,console.log(this.comments),this.commentsFetched=!0}catch(e){console.error("Error fetching comments:",e),this.commentsFetched=!0}},async fetchFavoriteBooks(){try{const e=await this.$store.dispatch("books/getUserFavorites",this.currentUser.id);this.favorites=this.getBooks.filter((t=>e.includes(t.id.toString()))),this.favoritesFetched=!0}catch(e){console.error("Error fetching favorite books:",e),this.favoritesFetched=!0}},async removeFromFavorites(e){try{await this.$store.dispatch("books/removeBookFromFavorites",{userId:this.currentUser.id,bookId:e}),this.favorites=this.favorites.filter((t=>t.id!==e))}catch(t){console.error("Error removing book from favorites:",t)}},toggleSection(e){"comments"===e?(this.showComments=!this.showComments,this.showFavorites=!1,this.showComments&&!this.commentsFetched&&this.fetchUserComments()):"favorites"===e&&(this.showFavorites=!this.showFavorites,this.showComments=!1,this.showFavorites&&!this.favoritesFetched&&this.fetchFavoriteBooks())}}};const ss=(0,_.A)(os,[["render",ts],["__scopeId","data-v-7d0806aa"]]);var rs=ss,as=o.p+"img/ja.023afb1d.jpg";const ns={id:"author"},is=(0,r.Fv)('<h3 data-v-f3a049ca>Author</h3><div class="card ms-5" style="max-width:85%;" data-v-f3a049ca><div class="row g-0" data-v-f3a049ca><div class="col-md-3" data-v-f3a049ca><img src="'+as+'" class="img-fluid rounded-start" alt="Jovana Davidovic" data-v-f3a049ca></div><div class="col-md-9" data-v-f3a049ca><div class="card-body" data-v-f3a049ca><h5 class="card-title" data-v-f3a049ca>Jovana Davidović</h5><p class="card-text" data-v-f3a049ca><small class="text-muted" data-v-f3a049ca>111/22</small></p></div></div></div></div>',2),ls=[is];function cs(e,t){return(0,r.uX)(),(0,r.CE)("div",ns,ls)}const ds={},ms=(0,_.A)(ds,[["render",cs],["__scopeId","data-v-f3a049ca"]]);var us=ms,hs={getBooks(e){let t=e.books;return e.selectedGenres.length&&(t=t.filter((t=>t.genreId.some((t=>e.selectedGenres.includes(t)))))),e.search.length&&(t=t.filter((t=>t.name.toLowerCase().includes(e.search.toLowerCase())))),"0"!==e.sortOption&&(t=t.sort(((t,o)=>{switch(e.sortOption){case"name_asc":return t.name.localeCompare(o.name);case"name_desc":return o.name.localeCompare(t.name);case"year_asc":return t.published_year-o.published_year;case"year_desc":return o.published_year-t.published_year}}))),t},getBook:(e,t)=>o=>t.hasBook(o)?e.books.find((e=>e.id==o)):"Book is not found",hasBook:e=>t=>e.books.some((e=>e.id==t)),getCommentsByBookId:e=>t=>e.comments.filter((e=>e.bookId===t)),getGenres:e=>e.categories,SET_FILTERED_BOOKS(e,t){e.filteredBooks=t}},ks={setOneBook(e,t){e.oneBook=t},ADD_COMMENT(e,t){e.comments.push(t)},SET_COMMENTS(e,t){e.comments=t},SET_USER_COMMENTS(e,t){e.userComments=t},SET_USER_FAVORITES(e,t){e.userFavorites=t},ADD_TO_FAVORITES(e,t){e.userFavorites.push(t),localStorage.setItem("favorites",JSON.stringify(e.favorites))},REMOVE_FAVORITE_BOOK(e,t){const o=e.userFavorites.indexOf(t);o>-1&&e.userFavorites.splice(o,1)},setBooks(e,t){e.books=t},ADD_BOOK(e,t){e.books.push(t)},REMOVE_BOOK(e,t){e.books=e.books.filter((e=>e.id!==t))},SET_CATEGORIES(e,t){e.categories=t},setGenres(e,t){e.selectedGenres=t},setSearch(e,t){e.search=t},setSortOption(e,t){e.sortOption=t}},ps=o(4373),gs={async getCategories({commit:e}){try{const t=await fetch("https://666c7c3c49dbc5d7145e2a4f.mockapi.io/bt/genre"),o=await t.json();e("SET_CATEGORIES",o)}catch(t){console.error("Error fetching categories:",t)}},async loadBooks(e){const t=await fetch("https://666c7c3c49dbc5d7145e2a4f.mockapi.io/bt/books"),o=await t.json();console.log(o),e.commit("setBooks",o)},async getOneBook(e,t){const o=await ps.A.get("https://666c7c3c49dbc5d7145e2a4f.mockapi.io/bt/books/"+t);return o},async addToFavorites({commit:e,rootState:t},o){const s=t.auth.currentUser.id;if(s)try{const t=await ps.A.post("http://localhost/bookstrack/server/addToFavorites.php",{userId:s,bookId:o});t.data.success?e("ADD_TO_FAVORITES",o):console.error(t.data.message)}catch(r){console.error("Error adding to favorites:",r)}else console.error("User is not authenticated")},async addComment({commit:e},t){try{const o=await ps.A.post("http://localhost/bookstrack/server/comments.php",t);if(!o.data.success)throw new Error("Failed to add comment");e("ADD_COMMENT",t)}catch(o){console.error("Error adding comment:",o)}},async getCommentsByBookId({commit:e},t){try{const o=await ps.A.get(`http://localhost/bookstrack/server/comments.php?bookId=${t}`);if(200===o.status)return e("SET_COMMENTS",o.data),o.data;throw new Error("Failed to fetch comments")}catch(o){throw console.error("Error fetching comments:",o),o}},async getUserComments({commit:e},t){try{const o=await ps.A.get(`http://localhost/bookstrack/server/getComments.php?username=${t}`);return e("SET_USER_COMMENTS",o.data),o.data}catch(o){throw console.error("Error fetching user comments:",o),o}},async getUserFavorites({commit:e},t){try{const o=await ps.A.get(`http://localhost/bookstrack/server/getFavorites.php?userId=${t}`);return e("SET_USER_FAVORITES",o.data),o.data}catch(o){throw console.error("Error fetching user favorite books:",o),o}},async removeBookFromFavorites({commit:e},{userId:t,bookId:o}){try{const s=await ps.A.post("http://localhost/bookstrack/server/removeFavorite.php",{userId:t,bookId:o});return e("REMOVE_FAVORITE_BOOK",o),s}catch(s){throw console.error("Error removing book from favorites:",s),s}},async addBook({commit:e},t){if(t&&0!==Object.keys(t).length&&t.name&&t.description&&t.img&&t.published_year&&t.author&&t.genreId.length)try{const o=await ps.A.post("https://666c7c3c49dbc5d7145e2a4f.mockapi.io/bt/books",t);e("ADD_BOOK",o.data)}catch(o){console.error("Error adding book:",o)}else console.error("Book object is incomplete or empty")},async addGenre(e,t){try{const e=await ps.A.post("https://666c7c3c49dbc5d7145e2a4f.mockapi.io/bt/genre",t);console.log(e.data)}catch(o){console.error("Error adding genre:",o)}},async deleteBook({commit:e},t){try{const o=await ps.A.delete("https://666c7c3c49dbc5d7145e2a4f.mockapi.io/bt/books/"+t);e("REMOVE_BOOK",t),console.log(o)}catch(o){console.error("Error:",o)}}},vs={namespaced:!0,state(){return{books:[],selectedGenres:[],search:"",comments:[],userComments:[],userFavorites:[],categories:[],sortOption:0}},getters:hs,mutations:ks,actions:gs},bs={async register({commit:e},t){try{const o=await ps.A.post("http://localhost/bookstrack/server/register.php",t);if(o.data.success){const s={id:o.data.user.id,username:t.username,email:t.email,role:"User"};return e("SET_CURRENT_USER",s),{success:!0,message:"User registered successfully"}}return{success:!1,message:o.data.message}}catch(o){return console.error(o),{success:!1,message:"Error during registration"}}},async logout(e){e.commit("LOGOUT_USER")},async login({commit:e},t){try{const o=await ps.A.post("http://localhost/bookstrack/server/login.php",t);if(o.data.success){const t=o.data.user;return e("SET_CURRENT_USER",t),{success:!0,message:"User logged in successfully"}}return{success:!1,message:o.data.message}}catch(o){return console.error(o),{success:!1,message:"Error during login"}}},async fetchUsers({commit:e}){const t=await fetch("http://localhost/bookstrack/server/getUsers.php"),o=await t.json();e("SET_USERS",o)},async deleteUser({commit:e},t){await fetch(`http://localhost/bookstrack/server/managerUser.php?id=${t}`,{method:"DELETE"}),e("REMOVE_USER",t)}},fs={isAuthenticated:e=>!!e.currentUser,currentUser:e=>e.currentUser,currentUserRole:e=>e.currentUser?e.currentUser.role:null,isAdmin:e=>e.currentUser&&"Admin"===e.currentUser.role,isUser:e=>e.currentUser&&"User"===e.currentUser.role,users:e=>e.users},ys={SET_USERS(e,t){e.users=t},SET_CURRENT_USER(e,t){e.currentUser=t,localStorage.setItem("currentUser",JSON.stringify(t))},LOGOUT_USER(e){e.currentUser=null,localStorage.removeItem("currentUser")},REMOVE_USER(e,t){e.users=e.users.filter((e=>e.id!==t))}},Ls={namespaced:!0,state(){return{users:[],currentUser:JSON.parse(localStorage.getItem("currentUser"))||null}},mutations:ys,getters:fs,actions:bs},Es=(0,E.y$)({modules:{books:vs,auth:Ls}});const Cs=[{path:"/",name:"home",component:Ee,meta:{transition:"fade",isUnauth:!0}},{path:"/about",name:"about",component:us,meta:{transition:"fade",isUnauth:!0}},{path:"/book/:id",name:"book",component:ut,props:!0,meta:{transition:"slide-fade",isUnauth:!0},children:[{path:"comment",name:"comment",component:rt,meta:{requiresAuth:!0}}]},{path:"/singup",name:"singup",component:It,meta:{transition:"slide-fade",isUnauth:!0,requiresGuest:!0}},{path:"/login",name:"login",component:qt,meta:{transition:"slide-fade",isUnauth:!0,requiresGuest:!0}},{path:"/myprofile",name:"myprofile",component:rs,meta:{transition:"slide-fade",requiresAuth:!0,requiredRole:"User"}},{path:"/admin",name:"admin",component:Ao,meta:{transition:"slide-fade",requiresAuth:!0,requiredRole:"Admin"}}],_s=(0,N.aE)({history:(0,N.LA)("/"),routes:Cs});_s.beforeEach(((e,t,o)=>{const s=Es.getters["auth/isAuthenticated"],r=Es.getters["auth/currentUserRole"];if(console.log(r),e.matched.some((e=>e.meta.requiresAuth)))if(s)if(e.matched.some((e=>e.meta.requiredRole))){const t=e.meta.requiredRole;r!==t?o({name:"home"}):o()}else o();else o({name:"login"});else e.matched.some((e=>e.meta.requiresGuest))&&s?o({name:"home"}):o()}));var ws=_s;const Ss={key:1};function Us(e,t,o,s,a,n){const i=(0,r.g2)("router-link");return o.isLink?((0,r.uX)(),(0,r.Wv)(i,{key:0,to:o.path},{default:(0,r.k6)((()=>[(0,r.eW)((0,q.v_)(o.text),1)])),_:1},8,["to"])):((0,r.uX)(),(0,r.CE)("button",Ss,[(0,r.RG)(e.$slots,"default",{},void 0,!0)]))}var Fs={props:{path:{type:String,required:!1,default:"/"},text:{type:String,required:!0},isLink:{type:Boolean,required:!1,default:!0}}};const As=(0,_.A)(Fs,[["render",Us],["__scopeId","data-v-036c51ea"]]);var Bs=As;const Os=(0,s.Ef)(V);Os.component("base-button",Bs),Os.use(Es),Os.use(ws),Os.mount("#app")}},t={};function o(s){var r=t[s];if(void 0!==r)return r.exports;var a=t[s]={exports:{}};return e[s].call(a.exports,a,a.exports,o),a.exports}o.m=e,function(){var e=[];o.O=function(t,s,r,a){if(!s){var n=1/0;for(d=0;d<e.length;d++){s=e[d][0],r=e[d][1],a=e[d][2];for(var i=!0,l=0;l<s.length;l++)(!1&a||n>=a)&&Object.keys(o.O).every((function(e){return o.O[e](s[l])}))?s.splice(l--,1):(i=!1,a<n&&(n=a));if(i){e.splice(d--,1);var c=r();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[s,r,a]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var s in t)o.o(t,s)&&!o.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){o.p="/"}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,s){var r,a,n=s[0],i=s[1],l=s[2],c=0;if(n.some((function(t){return 0!==e[t]}))){for(r in i)o.o(i,r)&&(o.m[r]=i[r]);if(l)var d=l(o)}for(t&&t(s);c<n.length;c++)a=n[c],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(d)},s=self["webpackChunkbookstrack"]=self["webpackChunkbookstrack"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=o.O(void 0,[504],(function(){return o(285)}));s=o.O(s)})();
//# sourceMappingURL=app.c7f820ad.js.map